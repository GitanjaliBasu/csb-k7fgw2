(this.webpackJsonpdocsphereui=this.webpackJsonpdocsphereui||[]).push([[0],{331:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),o=r(66),a=r(19),i=r(12),s=r(78),l=r(381),u=r(379),p=r(382),d=r(3),j=function(e){var t=e.message;return Object(d.jsx)(l.a,{styles:{root:{backgroundColor:"#e1dfdd",padding:"8px",borderRadius:"5px"}},children:Object(d.jsx)(p.a,{children:t})})},f=r(70),b=r.n(f),h=(r(106),r(79)),x=function(e){var t=e.snippet,r=t.match(/^(\w+)\n/),n=r?r[1]:null,c=t.replace(/^\w+\n/,""),o=b.a.highlightAuto(c,n?[n]:null).value;return Object(d.jsxs)("div",{style:{position:"relative",backgroundColor:"#f1f1f1",border:"1px solid #ccc",borderRadius:"3px",padding:"8px",marginBottom:"8px"},children:[Object(d.jsx)("pre",{style:{overflowX:"auto",whiteSpace:"pre-wrap",wordWrap:"break-word"},dangerouslySetInnerHTML:{__html:o}}),Object(d.jsx)(h.a,{style:{cursor:"pointer",position:"absolute",right:"8px",top:"8px",color:"#0078d4",fontSize:"1.2rem"},onClick:function(){navigator.clipboard.writeText(c)}})]})},g=function(e){var t=e.children;return Object(d.jsx)(l.a,{horizontalAlign:"center",verticalAlign:"center",verticalFill:!0,styles:{root:{width:"100%",height:"100vh",margin:"0 auto",textAlign:"left",color:"#605e5c"}},gap:15,children:Object(d.jsx)(l.a.Item,{styles:{root:{width:"100%"}},children:t})})},m=function(e){var t=e.message;return Object(d.jsx)(l.a,{styles:{root:{backgroundColor:"transparent",padding:"8px",borderRadius:"5px"}},children:Object(d.jsx)(p.a,{children:t})})},O=r(375),v=r(383),y=r(376),k=r(377),w=r(59),C=r(71),S=r(380),B=r(77),D=r.n(B),R=r(76),z=r.n(R),F=function(e){var t=e.onDocumentDataReceived,r=Object(n.useState)(null),c=Object(i.a)(r,2),o=c[0],a=c[1],s=function(){var e=Object(C.a)(Object(w.a)().mark((function e(){var r,n,c;return Object(w.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return(r=new FormData).append("files",o),e.prev=4,e.next=7,fetch("".concat("https://f09a-34-197-127-12.ngrok-free.app","/upload_documents"),{method:"POST",body:r});case 7:return n=e.sent,e.next=10,n.json();case 10:c=e.sent,console.log(c),t(c),a(null),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{type:"file",accept:".pdf,.docx",onChange:function(e){a(e.target.files[0])},style:{display:"none"},id:"fileInput"}),Object(d.jsx)("label",{htmlFor:"fileInput",children:Object(d.jsx)(S.a,{component:"span",color:"primary",style:{padding:0},children:Object(d.jsx)(z.a,{fontSize:"large"})})}),o&&Object(d.jsx)(S.a,{color:"primary",onClick:s,style:{marginLeft:"0px",padding:0},children:Object(d.jsx)(D.a,{fontSize:"large"})})]})},I=Object(O.a)((function(e){return{appBar:{backgroundColor:"#ffffff"},title:{flexGrow:1,color:"#000000"},container:{width:"100%"}}})),T=function(){var e=I();return Object(d.jsx)("div",{className:e.container,children:Object(d.jsx)(v.a,{position:"static",className:e.appBar,children:Object(d.jsxs)(y.a,{children:[Object(d.jsx)(k.a,{variant:"h6",className:e.title,children:"DocSphere"}),Object(d.jsx)(F,{onDocumentDataReceived:function(e){console.log("Document data received:",e)}})]})})})},N=r(60),_=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),r=t[0],o=t[1],p=Object(n.useState)([]),f=Object(i.a)(p,2),b=f[0],h=f[1],O=Object(n.useState)(!1),v=Object(i.a)(O,2),y=v[0],k=v[1],w=Object(n.useRef)(null),C=Object(n.useCallback)((function(){fetch("https://f09a-34-197-127-12.ngrok-free.app/get_answer/?question=".concat(r," && k=2"),{headers:{"ngrok-skip-browser-warning":"1"}}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=e.answer.startsWith("@error:"),r=S(t?e.answer.replace("@error:",""):e.answer),n=e.reference.reduce((function(e,t){return e[t.link]||(e[t.link]=[]),e[t.link].push(t.pageNo),e}),{}),c=t?null:Object.entries(n).map((function(e,t){var r=Object(i.a)(e,2),n=r[0],c=r[1];return Object(d.jsxs)("a",{href:"https://f09a-34-197-127-12.ngrok-free.app/?file=".concat(n),target:"_blank",rel:"noopener noreferrer",style:{marginRight:"8px"},children:["link",t+1,c.map((function(e,t){return Object(d.jsxs)("span",{children:["[",e,"]"]},t)}))]},t)})),o={message:Object(d.jsxs)(d.Fragment,{children:[r,Object(d.jsx)("br",{}),c]}),isBot:!0};h((function(e){return[].concat(Object(a.a)(e.slice(0,-1)),[o])}))})).catch((function(e){console.error(e)}))}),[r]);Object(n.useEffect)((function(){y&&(C(),k(!1),o(""))}),[y,C]),Object(n.useEffect)((function(){w.current&&(w.current.scrollTop=w.current.scrollHeight)}),[b]);var S=function(e){return"string"===typeof e?e.split("```").map((function(e,t){return t%2===1?Object(d.jsx)(x,{snippet:e},t):Object(d.jsx)("span",{children:e.split("\n").map((function(e,t){return Object(d.jsxs)(c.a.Fragment,{children:[e,Object(d.jsx)("br",{})]},t)}))},t)})):e},B=Object(s.l)(),D=Object(s.m)({title:{fontWeight:"bold",fontSize:"2rem",color:B.palette.themePrimary},inputContainer:{width:"100%",display:"flex",alignItems:"center"},inputBox:{flexGrow:1,marginRight:"8px",borderRadius:"25px",border:"2px solid",borderColor:B.palette.themePrimary,paddingLeft:"12px",paddingRight:"12px",paddingTop:"4px",paddingBottom:"4px",":hover":{borderColor:B.palette.themeDark},":focus-within":{borderColor:B.palette.themeDark}}});return Object(d.jsxs)(g,{children:[Object(d.jsx)(T,{style:{width:"100%"}}),Object(d.jsx)(l.a.Item,{children:Object(d.jsx)("div",{style:{display:"flex",flexDirection:"column",height:"70vh",overflow:"auto"},ref:w,children:b.map((function(e,t){return Object(d.jsx)("div",{style:{display:"flex",justifyContent:e.isBot?"flex-start":"flex-end",marginBottom:"8px"},children:e.isBot?Object(d.jsx)(j,{message:e.message&&S(e.message)}):Object(d.jsx)(m,{message:S(e.message)})},t)}))})}),Object(d.jsxs)(l.a,{horizontal:!0,gap:15,styles:{root:{width:"100%"}},children:[Object(d.jsx)(N.a,{icon:"game-icons:magic-broom",style:{cursor:"pointer",fontSize:"1.5rem",color:B.palette.redDark,alignSelf:"center"},onClick:function(){h([])}}),Object(d.jsx)(u.a,{className:D.inputBox,value:r,onChange:function(e){o(e.target.value)},autoComplete:"off",autoFocus:!0,multiline:!0,resizable:!1,underlined:!0,placeholder:"Type..."}),Object(d.jsx)(N.a,{icon:"fluent:send-16-regular",style:{cursor:"pointer",fontSize:"1.5rem",color:B.palette.themePrimary,alignSelf:"center"},onClick:function(){if(r){var e={message:"Typing...",isBot:!0};h((function(t){return[].concat(Object(a.a)(t),[{message:r,isBot:!1},e])})),k(!0)}}})]})]})},A=document.getElementById("root");Object(o.createRoot)(A).render(Object(d.jsx)(n.StrictMode,{children:Object(d.jsx)(_,{})}))}},[[331,1,2]]]);
//# sourceMappingURL=main.9f57b331.chunk.js.map